{"version":3,"sources":["containers/Flash.js","containers/Device.js","views/Devices.js"],"names":["Flash","type","message","duration","setType","persistOnHover","className","onClick","Device","HOST_IP","api_key","id","device","setMessage","deleteDevice","axios","delete","then","fetchedData","console","log","data","catch","error","battery","battryLevel","title","batteryLevel","defaultChecked","onChange","e","state","currentTarget","checked","put","on","confirmAlert","buttons","label","Devices","API_KEY","useState","devices","setDevices","useEffect","fetchDevices","undefined","get","interval","setInterval","clearInterval","Object","entries","map"],"mappings":"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","file":"static/js/13.aa1d75b8.chunk.js","sourcesContent":["import { FaTimes } from \"react-icons/fa\";\nimport FlashMessage from \"react-flash-message\";\n\nexport default function Flash({ type, message, duration, setType }) {\n  return (\n    <FlashMessage duration={duration} persistOnHover={true}>\n      <div className=\"notificationContainer\">\n        <div className={`notification ${type}`}>\n          <p>{message}</p>\n          <div className=\"icon\">\n            <FaTimes onClick={() => setType(\"none\")} />\n          </div>\n        </div>\n      </div>\n    </FlashMessage>\n  );\n}\n","import { MdDeleteForever } from \"react-icons/md\";\nimport { FaMagic } from \"react-icons/fa\";\nimport {\n  TiBatteryLow,\n  TiBatteryMid,\n  TiBatteryHigh,\n  TiBatteryFull,\n} from \"react-icons/ti\";\n\nimport axios from \"axios\";\nimport { confirmAlert } from \"react-confirm-alert\"; // Import\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nconst Device = ({ HOST_IP, api_key, id, device, setType, setMessage }) => {\n  const deleteAlert = () => {\n    confirmAlert({\n      title: \"Delete device \" + device[\"name\"],\n      message: \"Are you sure to do this?\",\n      buttons: [\n        {\n          label: \"Yes\",\n          onClick: () => deleteDevice(),\n        },\n        {\n          label: \"No\",\n        },\n      ],\n    });\n  };\n\n  const deleteDevice = () => {\n    axios\n      .delete(`${HOST_IP}/api/${api_key}/sensors/${id}`)\n      .then((fetchedData) => {\n        console.log(fetchedData.data);\n        setMessage(\"Device successfully deleted\");\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const toggleDevice = (state) => {\n    axios\n      .put(`${HOST_IP}/api/${api_key}/sensors/${id}/config`, { on: state })\n      .then((fetchedData) => {\n        console.log(fetchedData.data);\n        setMessage(\n          device[\"name\"] + \" successfully \" + (state ? \"enabled\" : \"disabled\")\n        );\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const batteryLevel = () => {\n    let battery = device[\"config\"][\"battery\"];\n    let battryLevel = battery + \"%\";\n    console.log(battery);\n    if (battery > 90) {\n      return <TiBatteryFull title={battryLevel} />;\n    } else if (battery > 70) {\n      return <TiBatteryHigh title={battryLevel} />;\n    } else if (battery > 40) {\n      return <TiBatteryMid title={battryLevel} />;\n    } else {\n      return <TiBatteryLow title={battryLevel} />;\n    }\n  };\n\n  return (\n    <div className=\"card device\">\n    <div className=\"row1\">\n      <div className=\"icon\"><FaMagic/></div>\n      <div className=\"text\">{device[\"name\"]}</div>\n    \n    </div>\n    <div className=\"row2\">\n      <div className=\"text\">{\"battery\" in device[\"config\"] && batteryLevel()}\n        ModelID: {device[\"modelid\"]} <br/>\n        Type: {device[\"type\"]} <br/>\n        Protocol: {device[\"protocol\"]} <br/>\n      </div>\n    </div>\n    <div className=\"row3\">\n     <div className=\"dropdown\"></div> {/* replace with dropdown form, (styling missing)*/}\n      <div className=\"switchContainer\">\n        <label className=\"switch\">\n          <input\n            type=\"checkbox\"\n            defaultChecked={device[\"config\"][\"on\"]}\n            onChange={(e) => toggleDevice(e.currentTarget.checked)}\n          />\n          <span className=\"slider\"></span>\n        </label>\n      </div>\n     <div className=\"btn red\"><MdDeleteForever title=\"Delete\" onClick={() => deleteAlert()} /></div>\n    </div>\n    </div>\n  );\n};\n\nexport default Device;\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Device from \"../containers/Device\";\nimport Flash from \"../containers/Flash\";\n\nconst Devices = ({ HOST_IP, API_KEY }) => {\n  const [devices, setDevices] = useState({});\n  const [type, setType] = useState(\"none\");\n  const [message, setMessage] = useState(\"no message\");\n\n  useEffect(() => {\n    const fetchDevices = () => {\n      if (API_KEY !== undefined) {\n        axios\n          .get(`${HOST_IP}/sensors`)\n          .then((fetchedData) => {\n            console.log(fetchedData.data);\n            setDevices(fetchedData.data);\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    };\n\n    fetchDevices();\n    const interval = setInterval(() => {\n      fetchDevices();\n    }, 2000); // <<-- ⏱ 1000ms = 1s\n    return () => clearInterval(interval);\n  }, [HOST_IP, API_KEY]);\n\n  return (\n    <div className=\"content\">\n      <div className=\"inner\">\n        <div className=\"devicecontainer\">\n            \n      {type !== \"none\" && (\n        <Flash\n          type={type}\n          message={message}\n          duration=\"5000\"\n          setType={setType}\n        />\n      )}\n      <div className=\"devicecard\">\n        {Object.entries(devices).map(([id, device]) => (\n          device[\"protocol\"] !== \"none\" &&\n          <Device\n            key={id}\n            HOST_IP={HOST_IP}\n            api_key={API_KEY}\n            id={id}\n            device={device}\n            setType={setType}\n            setMessage={setMessage}\n          />\n        ))}\n      </div>\n    </div>\n    </div>\n    </div>\n  );\n};\n\nexport default Devices;\n"],"sourceRoot":""}
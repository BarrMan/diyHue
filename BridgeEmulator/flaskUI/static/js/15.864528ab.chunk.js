(this.webpackJsonpdiyhue=this.webpackJsonpdiyhue||[]).push([[15],{110:function(t,e,c){"use strict";c.r(e),c.d(e,"default",(function(){return v}));var n=c(14),a=c(2),s=c(16),r=c.n(s),i=c(97),o=c(12),l=c(99),u=c(6),j=function(t){var e=t.HOST_IP,c=t.api_key,a=t.groupId,s=t.scenes;return Object(u.jsxs)(u.Fragment,{children:[Object.entries(s).filter((function(t){return t[1].group===a})).map((function(t){var a=Object(n.a)(t,2),s=a[0],i=a[1];return Object(u.jsx)("div",{className:"sceneContainer",onClick:function(){return function(t){r.a.put("".concat(e,"/api/").concat(c,"/groups/0/action"),{scene:t})}(s)},children:Object(u.jsx)("p",{style:{color:"#ccc"},children:i.name})},s)})),Object(u.jsx)("div",{className:"clear"})]})},d=c(17);function h(t,e,c){void 0===c&&(c=254);var n=1-t-e,a=(c/254).toFixed(2),s=a/e*t,r=a/e*n,i=1.656492*s-.354851*a-.255038*r,o=.707196*-s+1.655397*a+.036152*r,l=.051713*s-.121364*a+1.01153*r;return i>l&&i>o&&i>1?(o/=i,l/=i,i=1):o>l&&o>i&&o>1?(i/=o,l/=o,o=1):l>i&&l>o&&l>1&&(i/=l,o/=l,l=1),i=i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,o=o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055,l=l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055,i=Math.round(255*i),o=Math.round(255*o),l=Math.round(255*l),isNaN(i)&&(i=0),isNaN(o)&&(o=0),isNaN(l)&&(l=0),"rgba("+Math.floor(i)+","+Math.floor(o)+","+Math.floor(l)+",1)"}function b(t){var e,c,n,a=2e4/t;return a<=66?(e=255,c=99.4708025861*Math.log(a)-161.1195681661,n=a<=19?0:138.5177312231*Math.log(a-10)-305.0447927307):(e=329.698727446*Math.pow(a-60,-.1332047592),c=288.1221695283*Math.pow(a-60,-.0755148492),n=255),e=e>255?255:e,c=c>255?255:c,n=n>255?255:n,"rgba("+Math.floor(e)+","+Math.floor(c)+","+Math.floor(n)+",1)"}function g(t,e,c){var n=.664511*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.154324*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.162028*(c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92),a=.283881*t+.668433*e+.047685*c,s=88e-6*t+.07231*e+.986039*c,r=(n/(n+a+s)).toFixed(4),i=(a/(n+a+s)).toFixed(4);return isNaN(r)&&(r=0),isNaN(i)&&(i=0),[parseFloat(r),parseFloat(i)]}var p=function(t){var e=t.HOST_IP,c=t.api_key,n=t.id,a=t.light,s=function(t){console.log("Apply state "+JSON.stringify(t)),r.a.put("".concat(e,"/api/").concat(c,"/lights/").concat(n,"/state"),t)};return Object(u.jsxs)("div",{className:"lightContainer ".concat(a.state.on?"textDark":"textLight"),style:function(){if(a.state.on)return{background:"xy"===a.state.colormode?h(a.state.xy[0],a.state.xy[1],254):"ct"===a.state.colormode?b(a.state.ct):"linear-gradient(90deg, rgba(255,212,93,1))"}}(),children:[Object(u.jsx)("div",{className:"iconContainer",children:Object(u.jsx)(o.g,{})}),Object(u.jsx)("div",{className:"textContainer",children:Object(u.jsxs)("p",{children:[a.name," ",a.state.reachable||Object(u.jsx)(d.b,{title:"Unrechable"})]})}),Object(u.jsx)("div",{className:"switchContainer",children:Object(u.jsxs)("label",{className:"switch",children:[Object(u.jsx)("input",{type:"checkbox",defaultChecked:a.state.on,onChange:function(t){return s({on:t.currentTarget.checked})}}),Object(u.jsx)("span",{className:"slider"})]})}),Object(u.jsx)("div",{className:"slideContainer",children:Object(u.jsx)("input",{type:"range",min:"1",max:"254",defaultValue:"50",className:"slider",onChange:function(t){return s({bri:parseInt(t.currentTarget.value)})}})})]})},O=c(98);function f(t){var e=t.HOST_IP,c=t.api_key,s=t.lights,o=t.groupLights,l=Object(a.useRef)(null),j=Object(a.useRef)(null),d=Object(a.useState)(!0),b=Object(n.a)(d,2),p=b[0],f=b[1];Object(a.useEffect)((function(){return f(!1),function(){f(!1)}}),[]);var x,v=[],m=Object(i.a)(o.entries());try{for(m.s();!(x=m.n()).done;){var y=Object(n.a)(x.value,1)[0];"xy"in s[y].state&&v.push(h(s[y].state.xy[0],s[y].state.xy[1],254))}}catch(k){m.e(k)}finally{m.f()}var N=function(t){var n=t.rgb;console.log(t.rgb),console.log("Apply state "+JSON.stringify(t)),r.a.put("".concat(e,"/api/").concat(c,"/lights/").concat(o[t.index],"/state"),{xy:g(n.r,n.g,n.b)})};return Object(a.useEffect)((function(){l.current&&!j.current&&(j.current=new O.a.ColorPicker(l.current,{layout:[{component:O.a.ui.Wheel,options:{}}],colors:v}),j.current.on("input:end",N))}),[N]),Object(u.jsx)("div",{ref:l,className:p?"hide":"show"})}var x=function(t){var e=t.HOST_IP,c=t.api_key,s=t.id,d=t.group,g=t.lights,O=t.scenes,x=Object(a.useState)("closed"),v=Object(n.a)(x,2),m=v[0],y=v[1];return Object(u.jsxs)("div",{className:"groupContainer ".concat(d.state.any_on?"textDark":"textLight"," ").concat("closed"!==m?"expanded":""),style:function(){if(d.state.any_on){var t,e="linear-gradient(90deg, ",c=100/d.lights.length,a=Object(i.a)(d.lights.entries());try{for(a.s();!(t=a.n()).done;){var s=Object(n.a)(t.value,2),r=s[0],o=s[1];"xy"===g[o].state.colormode?(1===d.lights.length&&(e+="rgba(200,200,200,1) 0%,"),e=e+h(g[o].state.xy[0],g[o].state.xy[1],254)+" "+Math.floor(c*(r+1))+"%,"):"ct"===g[o].state.colormode?(1===d.lights.length&&(e+="rgba(200,200,200,1) 0%,"),e=e+b(g[o].state.ct)+" "+Math.floor(c*(r+1))+"%,"):(1===d.lights.length&&(e+="rgba(200,200,200,1) 0%,"),e=e+"rgba(255,212,93,1) "+Math.floor(c*(r+1))+"%,")}}catch(l){a.e(l)}finally{a.f()}return{background:e.slice(0,-1)+")"}}}(),children:["closed"!==m&&Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{onClick:function(){return y("closed")},children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)(o.b,{})}),Object(u.jsx)("div",{className:"text",children:"close"})]}),Object(u.jsx)("div",{className:"tab ".concat("lights"===m?"active":""),onClick:function(){return y("lights")},children:Object(u.jsx)(o.i,{})}),Object(u.jsx)("div",{className:"tab ".concat("scenes"===m?"active":""),onClick:function(){return y("scenes")},children:Object(u.jsx)(o.k,{})}),Object(u.jsx)("div",{className:"tab ".concat("colorPicker"===m?"active":""),onClick:function(){return y("colorPicker")},children:Object(u.jsx)(o.n,{})})]}),Object(u.jsx)("div",{className:"overlayBtn",onClick:function(){return y("colorPicker")}}),Object(u.jsx)("div",{className:"iconContainer",children:"Zone"===d.type?Object(u.jsx)(o.d,{}):Object(u.jsx)(l.a,{})}),Object(u.jsx)("div",{className:"textContainer",children:Object(u.jsx)("p",{children:d.name})}),Object(u.jsx)("div",{className:"switchContainer",children:Object(u.jsxs)("label",{className:"switch",children:[Object(u.jsx)("input",{type:"checkbox",value:d.state.any_on,checked:d.state.any_on,onChange:function(t){return function(t){var n={on:t};d.state.any_on=t,console.log("Apply state "+JSON.stringify(n)),r.a.put("".concat(e,"/api/").concat(c,"/groups/").concat(s,"/action"),n)}(t.target.checked)}}),Object(u.jsx)("span",{className:"slider"})]})}),Object(u.jsx)("div",{className:"slideContainer",children:Object(u.jsx)("input",{type:"range",min:"1",max:"254",value:d.action.bri,step:"1",className:"slider",onChange:function(t){return function(t){var n={bri:t};d.action.bri=t,console.log("Apply state "+JSON.stringify(n)),r.a.put("".concat(e,"/api/").concat(c,"/groups/").concat(s,"/action"),n)}(parseInt(t.target.value))}})}),Object(u.jsxs)("div",{className:"dimmer",children:["scenes"===m&&Object(u.jsx)(j,{HOST_IP:e,api_key:c,groupId:s,scenes:O}),"lights"===m&&Object(u.jsx)("div",{className:"lightsContainer",children:d.lights.map((function(t){return Object(u.jsx)(p,{HOST_IP:e,api_key:c,id:t,light:g[t]},t)}))}),"colorPicker"===m&&Object(u.jsx)(f,{HOST_IP:e,api_key:c,lights:g,groupLights:d.lights})]})]})};function v(t){var e=t.HOST_IP,c=t.API_KEY,s=Object(a.useState)({config:{},lights:{},groups:{},scenes:{}}),i=Object(n.a)(s,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){var t=function(){void 0!==c&&r.a.get("".concat(e,"/api/").concat(c)).then((function(t){console.log(t.data),l(t.data)})).catch((function(t){console.error(t)}))};t();var n=setInterval((function(){t()}),2e3);return function(){return clearInterval(n)}}),[e,c]),Object(u.jsx)("div",{className:"content",children:Object(u.jsx)("div",{className:"cardGrid",children:Object.entries(o.groups).filter((function(t){return"Entertainment"!==t[1].type})).map((function(t){var a=Object(n.a)(t,2),s=a[0],r=a[1];return Object(u.jsx)(x,{api_key:c,HOST_IP:e,id:s,group:r,lights:o.lights,scenes:o.scenes},s)}))})})}}}]);
//# sourceMappingURL=15.864528ab.chunk.js.map
(this.webpackJsonpdiyhue=this.webpackJsonpdiyhue||[]).push([[6],{110:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return v}));var c=o(14),n=o(2),a=o(16),l=o.n(a),r=o(93),i=o(12),s=o(27),u=o(17),h=(o(90),o(91)),j=o.n(h),b=(o(92),o(94)),d=(o(95),o(6)),p=function(e){var t=e.api_key,o=e.id,c=e.light,n=e.modelIds,a=e.setType,h=e.setMessage,p=function(){l.a.delete("/api/".concat(t,"/lights/").concat(o)).then((function(e){console.log(e.data),h("Light successfully deleted"),a("none"),a("success")})).catch((function(e){console.error(e),h("Error occured, check browser console"),a("none"),a("error")}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"iconContainer",children:Object(d.jsx)(i.h,{onClick:function(){l.a.put("/api/".concat(t,"/lights/").concat(o,"/state"),{alert:"select"}).then((function(e){console.log(e.data),h("Light alerted"),a("none"),a("success")})).catch((function(e){console.error(e),h("Error occured, check browser console"),a("none"),a("error")}))}})}),c.name," ",c.state.reachable&&Object(d.jsx)(i.c,{title:"Reachable"})||Object(d.jsx)(u.b,{title:"Unrechable"}),Object(d.jsx)("br",{}),Object(d.jsx)(j.a,{options:n,value:c.modelid,onChange:function(e){return t=e.value,console.log(Object(r.a)({},o,t)),void l.a.post("/light-types",Object(r.a)({},o,t)).then((function(e){console.log(e.data),h("Modelid updated"),a("none"),a("success")})).catch((function(e){console.error(e),h("Error occured, check browser console"),a("none"),a("error")}));var t},placeholder:"Choose light modelid"}),"Protocol: ",c.protocol,Object(d.jsx)("br",{})," IP: ",c.protocol_cfg.ip,Object(d.jsx)("br",{}),Object(d.jsx)(s.a,{title:"Delete",onClick:function(){Object(b.confirmAlert)({title:"Delete light "+c.name,message:"Are you sure to do this?",buttons:[{label:"Yes",onClick:function(){return p()}},{label:"No"}]})}}),"  ",Object(d.jsx)(s.c,{title:"Update"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{})]})},g=o(101),m=o(99),O=function(e){var t=e.API_KEY,o=Object(n.useState)({protocol:"auto"}),a=Object(c.a)(o,2),i=a[0],s=a[1],u=function(e,t){s(Object(m.a)(Object(m.a)({},i),{},Object(r.a)({},e,t)))};return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o={protocol:i.protocol,ip:i.ip,config:Object(g.a)(i,["protocol","ip"])};l.a.post("/api/".concat(t,"/lights"),o)},className:"add-form",children:[Object(d.jsx)(j.a,{options:[{value:"auto",label:"Autodetect"},{value:"domoticz",label:"Domoticz"},{value:"flex",label:"Flex"},{value:"jeedom",label:"Jeedom"},{value:"milight",label:"MiLight"},{value:"mibox",label:"Mi Box"},{value:"wiz",label:"Wiz"}],value:i.protocol,onChange:function(e){return u("protocol",e.value)},placeholder:"Choose light protocol"}),Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{children:"Light Ip"}),Object(d.jsx)("input",{type:"text",placeholder:"192.168.x.x",value:i.ip,onChange:function(e){return u("ip",e.target.value)}})]}),"auto"!==i.protocol&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{children:"Name"}),Object(d.jsx)("input",{type:"text",value:i.lightName,onChange:function(e){return u("lightName",e.target.value)},placeholder:"Name used on diyhue"})]}),Object(d.jsx)("div",{className:"form-control",children:Object(d.jsx)(j.a,{options:[{value:"LOM001",label:"On/Off Plug"},{value:"LWB010",label:"Dimmable Light"},{value:"LTW001",label:"Color temperature Light"},{value:"LCT015",label:"Color Light"},{value:"LST002",label:"Color Strip"}],value:i.lightModelID,onChange:function(e){return u("lightModelID",e.value)},placeholder:"Emulated light type"})})]}),("milight"===i.protocol||"mibox"===i.protocol)&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{children:"Device ID"}),Object(d.jsx)("input",{type:"text",value:i.miID,onChange:function(e){return u("miID",e.target.value)},placeholder:"0x1234"})]}),Object(d.jsx)(j.a,{options:[{value:"rgbw",label:"RGBW"},{value:"cct",label:"CCT"},{value:"rgb_cct",label:"RGB-CCT"},{value:"rgb",label:"RGB"}],value:i.miModes,onChange:function(e){return u("miModes",e.value)},placeholder:"Choose light mode"}),Object(d.jsx)(j.a,{options:["1","2","3","4"],value:i.miGroups,onChange:function(e){return u("miGroups",e.value)},placeholder:"Choose light group"})]}),"mibox"===i.protocol&&Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{children:"Port"}),Object(d.jsx)("input",{type:"number",placeholder:"Mi Box port",value:i.miBoxPort,onChange:function(e){return u("miboxPort",e.target.value)}})]}),"domoticz"===i.protocol&&Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{children:"Device ID"}),Object(d.jsx)("input",{type:"text",placeholder:"",value:i.domoticzID,onChange:function(e){return u("domoticzID",e.target.value)}})]}),"jeedom"===i.protocol&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{children:"Light Api"}),Object(d.jsx)("input",{type:"text",placeholder:"Light Api",value:i.jeedomlightAPI,onChange:function(e){return u("jeedomlightAPI",e.target.value)}})]}),Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{children:"Light ID"}),Object(d.jsx)("input",{type:"text",placeholder:"Light ID",value:i.jeedomlightID,onChange:function(e){return u("jeedomlightID",e.target.value)}})]})]}),Object(d.jsx)("div",{className:"form-control",children:Object(d.jsx)("input",{type:"submit",value:"Add Light",className:"btn btn-block"})})]})},f=o(88);function v(e){var t=e.API_KEY,o=Object(n.useState)({}),a=Object(c.a)(o,2),r=a[0],i=a[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),h=u[0],j=u[1],b=Object(n.useState)("none"),g=Object(c.a)(b,2),m=g[0],v=g[1],x=Object(n.useState)("no message"),N=Object(c.a)(x,2),C=N[0],M=N[1],y=Object(n.useState)(!1),I=Object(c.a)(y,2),D=I[0],L=I[1],k=function(){void 0!==t&&l.a.get("/lights").then((function(e){console.log(e.data),i(e.data)})).catch((function(e){console.error(e)}))};return Object(n.useEffect)((function(){k(),void 0!==t&&l.a.get("/light-types").then((function(e){console.log(e.data),j(e.data.result)})).catch((function(e){console.error(e)}));var e=setInterval((function(){k()}),2e3);return function(){return clearInterval(e)}}),[t]),Object(d.jsxs)("div",{className:"content",children:["none"!==m&&Object(d.jsx)(f.a,{type:m,message:C,duration:"5000",setType:v}),Object(d.jsxs)("div",{className:"cardGrid",children:[Object(d.jsxs)("div",{className:"linkbtn",onClick:function(){void 0!==t&&l.a.post("/api/".concat(t,"/lights"),"").then((function(e){console.log(e.data),M("Searching for new lights..."),v("none"),v("success")})).catch((function(e){console.error(e),M("Error occured, check browser console"),v("none"),v("error")}))},children:["Scan For Lights",Object(d.jsx)("div",{className:"btn btn-block"})]}),Object(d.jsx)("a",{onClick:function(){return L(!D)},className:"someClassWithCursorPointer",children:"Add light manually"}),D&&Object(d.jsx)(O,{API_KEY:t}),Object.entries(r).map((function(e){var o=Object(c.a)(e,2),n=o[0],a=o[1];return Object(d.jsx)(p,{api_key:t,id:n,light:a,modelIds:h,setType:v,setMessage:M},n)}))]})]})}},88:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));o(2);var c=o(12),n=o(89),a=o.n(n),l=o(6);function r(e){var t=e.type,o=e.message,n=e.duration,r=e.setType;return Object(l.jsx)(a.a,{duration:n,persistOnHover:!0,children:Object(l.jsx)("div",{className:"notificationContainer",children:Object(l.jsxs)("div",{className:"notification ".concat(t),children:[Object(l.jsx)("p",{children:o}),Object(l.jsx)("div",{className:"icon",children:Object(l.jsx)(c.m,{onClick:function(){return r("none")}})})]})})})}},90:function(e,t,o){"use strict";function c(e,t,o){void 0===o&&(o=254);var c=1-e-t,n=(o/254).toFixed(2),a=n/t*e,l=n/t*c,r=1.656492*a-.354851*n-.255038*l,i=.707196*-a+1.655397*n+.036152*l,s=.051713*a-.121364*n+1.01153*l;return r>s&&r>i&&r>1?(i/=r,s/=r,r=1):i>s&&i>r&&i>1?(r/=i,s/=i,i=1):s>r&&s>i&&s>1&&(r/=s,i/=s,s=1),r=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,i=i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,s=s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055,r=Math.round(255*r),i=Math.round(255*i),s=Math.round(255*s),isNaN(r)&&(r=0),isNaN(i)&&(i=0),isNaN(s)&&(s=0),"rgba("+Math.floor(r)+","+Math.floor(i)+","+Math.floor(s)+",1)"}function n(e){var t,o,c,n=2e4/e;return n<=66?(t=255,o=99.4708025861*Math.log(n)-161.1195681661,c=n<=19?0:138.5177312231*Math.log(n-10)-305.0447927307):(t=329.698727446*Math.pow(n-60,-.1332047592),o=288.1221695283*Math.pow(n-60,-.0755148492),c=255),t=t>255?255:t,o=o>255?255:o,c=c>255?255:c,"rgba("+Math.floor(t)+","+Math.floor(o)+","+Math.floor(c)+",1)"}function a(e,t,o){var c=.664511*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.154324*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.162028*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),n=.283881*e+.668433*t+.047685*o,a=88e-6*e+.07231*t+.986039*o,l=(c/(c+n+a)).toFixed(4),r=(n/(c+n+a)).toFixed(4);return isNaN(l)&&(l=0),isNaN(r)&&(r=0),[parseFloat(l),parseFloat(r)]}o.d(t,"a",(function(){return c})),o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return a}))}}]);
//# sourceMappingURL=6.3f56c33b.chunk.js.map